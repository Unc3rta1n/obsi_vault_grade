### 1. Ветвление и слияние (Branching and Merging)

#### 1.1. Стратегии ветвления

- **Git Flow**: Это одна из самых популярных стратегий для больших проектов. Она предполагает создание нескольких ключевых веток:
  - `master` — стабильная версия для продакшн.
  - `develop` — основная ветка разработки.
  - `feature/*` — ветки для новых функций.
  - `release/*` — ветки для подготовки релиза.
  - `hotfix/*` — ветки для исправления критических ошибок в продакшн.
  
  Пример использования Git Flow:
  ```bash
  git flow init
  git flow feature start new-feature
  git flow feature finish new-feature
  ```

- **GitHub Flow**: Это более упрощенная стратегия, которая предполагает работу только с двумя основными ветками: `main` и ветками для фич. Основное внимание уделяется непрерывному развертыванию и интеграции.

#### 1.2. Слияние веток (Merge)

- **Обычное слияние**:
  ```bash
  git checkout main
  git merge feature-branch
  ```

- **Слияние с сохранением истории**:
  Для того чтобы сохранить историю изменений в ветке, используйте флаг `--no-ff`:
  ```bash
  git merge --no-ff feature-branch
  ```

- **Использование rebase**:
  Использование `git rebase` помогает сделать историю более линейной, что облегчает просмотр логов.
  ```bash
  git checkout feature-branch
  git rebase main
  ```

  Важно! После выполнения `rebase` рекомендуется использовать `git push --force-with-lease`, чтобы обновить удалённый репозиторий.

#### 1.3. Разрешение конфликтов

- Конфликты возникают, когда Git не может автоматически объединить изменения. В таком случае необходимо вручную разрешить конфликт в соответствующих файлах, а затем завершить слияние:
  ```bash
  git merge --abort
  ```

### 2. Работа с удалёнными репозиториями

#### 2.1. Отдалённые ветки

- **Добавление удалённого репозитория**:
  ```bash
  git remote add origin https://github.com/user/repo.git
  ```

- **Получение обновлений из удалённого репозитория**:
  ```bash
  git fetch origin
  ```

- **Передача изменений в удалённый репозиторий**:
  ```bash
  git push origin feature-branch
  ```

#### 2.2. Рабочий процесс с форками (Forking)

- Для использования **форков** создайте форк репозитория и клонируйте его:
  ```bash
  git clone https://github.com/your-user/repo.git
  ```

- **Обновление форка**: Если основной репозиторий был обновлён, можно подтянуть изменения:
  ```bash
  git remote add upstream https://github.com/original-user/repo.git
  git fetch upstream
  git merge upstream/main
  ```

#### 2.3. Работа с субмодулями

Субмодуль — это репозиторий внутри другого репозитория. Используется для управления зависимостями.

- **Добавление субмодуля**:
  ```bash
  git submodule add https://github.com/user/repo.git path/to/submodule
  ```

- **Обновление субмодуля**:
  ```bash
  git submodule update --remote
  ```

### 3. История и логирование

#### 3.1. Просмотр истории

- **Обычный лог**:
  ```bash
  git log
  ```

- **Лог с графом**:
  Для визуализации веток и слияний:
  ```bash
  git log --oneline --graph --decorate
  ```

#### 3.2. Поиск в истории

- **Поиск по коммитам**:
  ```bash
  git log --grep="fix bug"
  ```

- **Поиск по изменениям в файлах**:
  ```bash
  git log -S"function_name"
  ```

#### 3.3. Восстановление коммитов

- **Откат коммита (непостоянный)**:
  ```bash
  git reset --soft HEAD~1
  ```

- **Удаление коммита с историей**:
  ```bash
  git reset --hard HEAD~1
  ```

- **Отмена изменений в файле**:
  ```bash
  git checkout -- <filename>
  ```

### 4. Теги и релизы

#### 4.1. Создание тегов

- **Тег в коммите**:
  ```bash
  git tag v1.0.0
  ```

- **Передача тегов в удалённый репозиторий**:
  ```bash
  git push origin v1.0.0
  ```

#### 4.2. Удаление тегов

- **Удаление локального тега**:
  ```bash
  git tag -d v1.0.0
  ```

- **Удаление тега в удалённом репозитории**:
  ```bash
  git push --delete origin v1.0.0
  ```

### 5. Оптимизация репозиториев

#### 5.1. Удаление лишних файлов из истории

Если необходимо удалить файлы из всей истории репозитория (например, для конфиденциальных данных), используйте утилиту `BFG Repo-Cleaner` или `git filter-branch`.

Пример использования `BFG`:
```bash
bfg --delete-files "*.log" my-repo.git
```

#### 5.2. Уменьшение размера репозитория

Если репозиторий сильно разросся из-за больших файлов, можно удалить их из истории с помощью:
```bash
git filter-branch --tree-filter 'rm -rf path/to/large/files' HEAD
```

#### 5.3. Сжатиe репозитория

Для очистки репозитория от неиспользуемых объектов используйте команду:
```bash
git gc --aggressive
```

### 6. Дополнительные возможности

#### 6.1. Сохранение изменений временно (Stashing)

Для временного сохранения незавершённых изменений:
```bash
git stash
git stash pop
```

#### 6.2. Работа с несколькими репозиториями

Git позволяет работать с несколькими репозиториями в одном проекте через подмодули или через дополнительные удалённые репозитории, добавленные через команду `git remote add`.

#### 6.3. Интерактивный rebase

Интерактивный `rebase` позволяет переписать историю коммитов, что полезно для организации коммитов в более удобочитаемом виде. Команда `git rebase -i` позволяет выбрать, какие коммиты можно изменить, удалить или объединить.
```bash
git rebase -i HEAD~3
```

В открывшемся редакторе вы можете использовать следующие команды:
- `pick` — оставить коммит.
- `reword` — изменить сообщение коммита.
- `squash` — объединить коммит с предыдущим.
- `drop` — удалить коммит.

### Заключение

Продвинутое использование Git включает в себя стратегическое ветвление, манипуляции с историей, работу с подмодулями и удалёнными репозиториями. Эти навыки помогают улучшить рабочий процесс разработки, делают проект более гибким и ускоряют командную работу.
