SSH (Secure Shell) — это протокол для безопасного удаленного подключения к другим компьютерам, особенно в серверных и облачных средах. Используя SSH, можно безопасно управлять сервером и передавать файлы по незащищенной сети. Ниже приведены основные шаги и команды для подключения по SSH через терминал.

## 1. Подключение к удаленному серверу

Для подключения по SSH к удаленному серверу используется команда `ssh`. Стандартный синтаксис:

```bash
ssh username@hostname_or_ip
```

Где:
- **username** — это имя пользователя на удаленном сервере.
- **hostname_or_ip** — это доменное имя или IP-адрес удаленного сервера.

Пример:
```bash
ssh admin@192.168.1.10
```
После ввода этой команды система запросит пароль для пользователя `admin`. После успешной аутентификации откроется терминал удаленного сервера, и вы сможете выполнять команды, как если бы находились на этом сервере.

## 2. Использование SSH-ключей для аутентификации

Чтобы избежать ввода пароля каждый раз при подключении, можно настроить SSH-ключи. Процесс состоит из двух основных шагов:
1. **Создание SSH-ключей на локальной машине**.
2. **Передача публичного ключа на сервер**.

### Создание SSH-ключей
Для генерации SSH-ключей на локальной машине используйте команду:

```bash
ssh-keygen -t rsa -b 4096
```

- Вопросы, которые будут заданы:
  - **Путь для сохранения ключа**: по умолчанию ключи сохраняются в `~/.ssh/id_rsa` (нажмите Enter для продолжения).
  - **Пароль для ключа**: при желании можно установить пароль для дополнительной безопасности (необязательно).

### Копирование публичного ключа на сервер
Для того чтобы сервер распознавал ваш ключ и не запрашивал пароль при подключении, необходимо добавить публичный ключ в файл `~/.ssh/authorized_keys` на сервере.

Для этого используйте команду:

```bash
ssh-copy-id username@hostname_or_ip
```

Пример:
```bash
ssh-copy-id admin@192.168.1.10
```

Эта команда автоматически добавит ваш публичный ключ в нужный файл на сервере. После этого подключение будет происходить без необходимости ввода пароля, если только не был установлен пароль для вашего ключа.

## 3. Подключение с использованием ключа

После настройки ключей подключение происходит без ввода пароля (если не задан пароль для ключа):

```bash
ssh username@hostname_or_ip
```

Если используется нестандартный путь для ключа, можно указать его с помощью опции `-i`:

```bash
ssh -i /path/to/private_key username@hostname_or_ip
```

## 4. Подключение через нестандартный порт

По умолчанию SSH использует порт 22. Если сервер настроен на использование другого порта, можно указать его через опцию `-p`:

```bash
ssh -p 2222 username@hostname_or_ip
```

## 5. Туннелирование через SSH

SSH также поддерживает создание защищенных туннелей для передачи данных, например, для безопасного доступа к сервисам внутри локальной сети через интернет. Это называется **SSH-туннелированием**.

Пример туннеля для перенаправления локального порта 8080 на удаленный сервер:

```bash
ssh -L 8080:localhost:8080 username@hostname_or_ip
```

Теперь можно подключиться к сервису на порту 8080 удаленного сервера, используя локальный адрес `localhost:8080`.

## 6. Работа с сессиями SSH

### Отключение от сервера
Для завершения SSH-сеанса просто введите команду:

```bash
exit
```

### Использование SSH в фоновом режиме
Если нужно оставить SSH-сессию работающей в фоновом режиме, используйте команду `nohup` или `screen`.

Пример с использованием `nohup`:

```bash
nohup some_command &
```

Эта команда запускает процесс в фоне, и он продолжит работать даже после того, как вы выйдете из SSH-сессии.

## 7. Редактирование удаленных файлов

С помощью SSH можно также редактировать файлы на удаленном сервере. Например, с помощью команды `nano`:

```bash
ssh username@hostname_or_ip "nano /path/to/file"
```

## 8. Просмотр информации о текущем SSH-соединении

Чтобы узнать информацию о текущем соединении, используйте команду:

```bash
whoami
```

Это покажет имя пользователя, под которым выполнен вход на удаленном сервере.

## Заключение

SSH — это мощный инструмент для удаленной работы с серверами. Он обеспечивает безопасную передачу данных и удобство администрирования удаленных машин. Правильная настройка SSH-ключей, использование туннелей и понимание базовых команд значительно улучшат вашу продуктивность при работе с удаленными системами.
