## Введение в контейнеризацию

Контейнеризация — это метод виртуализации на уровне операционной системы, при котором приложения и их зависимости упаковываются в изолированные контейнеры. Это позволяет обеспечить переносимость, масштабируемость и упрощение развертывания приложений на разных средах, независимо от их конфигурации.

Основным инструментом для контейнеризации является **Docker**, который позволяет создавать, разворачивать и управлять контейнерами.

## Преимущества контейнеризации

- **Изоляция приложений**: Каждый контейнер работает в своей изолированной среде, что предотвращает конфликты между приложениями и зависимостями.
- **Переносимость**: Контейнеры можно запустить на любом сервере, который поддерживает Docker, независимо от операционной системы.
- **Масштабируемость**: Контейнеры легко масштабируются — их можно запускать и останавливать в зависимости от нагрузки.
- **Скорость развертывания**: Контейнеры запускаются значительно быстрее, чем виртуальные машины, потому что они используют ядро хостовой ОС.

## Основные концепты контейнеризации

### 1. Контейнер

Контейнер — это изолированная среда, в которой работает приложение, включая все необходимые библиотеки и зависимости. Контейнеры обеспечивают консистентность среды на всех стадиях разработки, тестирования и эксплуатации.

### 2. Docker Image (Образ Docker)

Образ Docker — это шаблон для создания контейнера. Он включает в себя все необходимые компоненты для запуска приложения, такие как операционная система, зависимости, библиотеки и сам код приложения.

Образы создаются с помощью Dockerfile — текстового файла, который описывает, как создать образ для контейнера.

### 3. Docker Container (Контейнер Docker)

Контейнер — это экземпляр Docker-образа, запущенный на хост-системе. Каждый контейнер изолирован от других контейнеров и от хостовой системы, что позволяет запускать несколько контейнеров с разными конфигурациями на одном сервере.

### 4. Dockerfile

Dockerfile — это файл с инструкциями для создания Docker-образа. Он определяет, какие шаги нужно выполнить для сборки образа, например, установка необходимых пакетов, копирование файлов и запуск приложений.

Пример Dockerfile:

```dockerfile
# Указываем базовый образ
FROM node:14

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы проекта в контейнер
COPY . .

# Устанавливаем зависимости
RUN npm install

# Указываем команду для запуска приложения
CMD ["npm", "start"]
```

## Основные команды Docker

### 1. Запуск контейнера

Для запуска контейнера из образа используйте команду:

```bash
docker run -d -p 80:80 --name mycontainer myimage
```

- `-d` — запуск в фоновом режиме.
- `-p 80:80` — проброс порта (порт 80 на хосте будет связан с портом 80 внутри контейнера).
- `--name` — задает имя контейнера.
- `myimage` — имя образа, на основе которого будет запущен контейнер.

### 2. Список контейнеров

Чтобы увидеть список запущенных контейнеров, используйте:

```bash
docker ps
```

Для отображения всех контейнеров, включая остановленные:

```bash
docker ps -a
```

### 3. Остановка контейнера

Для остановки контейнера используйте команду:

```bash
docker stop mycontainer
```

### 4. Удаление контейнера

Для удаления остановленного контейнера:

```bash
docker rm mycontainer
```

### 5. Просмотр логов контейнера

Чтобы просмотреть логи контейнера, используйте команду:

```bash
docker logs mycontainer
```

### 6. Сборка Docker-образа

Для сборки нового образа из Dockerfile в текущей директории:

```bash
docker build -t myimage .
```

### 7. Удаление образа

Для удаления Docker-образа:

```bash
docker rmi myimage
```

## Основы Docker Compose

Docker Compose — это инструмент для определения и запуска многоконтейнерных Docker-приложений. Вместо того чтобы запускать контейнеры по отдельности, можно описать всю конфигурацию в одном YAML-файле и запустить все контейнеры одновременно.

Пример `docker-compose.yml`:

```yaml
version: '3'
services:
  web:
    image: nginx
    ports:
      - "80:80"
  app:
    image: node:14
    command: npm start
    volumes:
      - .:/app
```

Запуск всех контейнеров из `docker-compose.yml`:

```bash
docker-compose up
```

## Заключение

Контейнеризация с использованием Docker — это мощный подход для упрощения развертывания и управления приложениями. Контейнеры позволяют создавать переносимые и изолированные среды для приложений, что способствует улучшению производительности и стабильности разработки и эксплуатации.
